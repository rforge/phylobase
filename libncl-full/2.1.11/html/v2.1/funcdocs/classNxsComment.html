<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>NCL: NxsComment Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>NxsComment Class Reference</h1><!-- doxytag: class="NxsComment" -->
<p>General notes on NexusTokenizing.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="nxstoken_8h_source.html">nxstoken.h</a>&gt;</code></p>

<p><a href="classNxsComment-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>General notes on NexusTokenizing. </p>
<p>File position information (pos, line and column) refer to the end of the token.</p>
<p>Note 1: the GetEmbeddedComments methods of <a class="el" href="classProcessedNxsToken.html" title="Storage for a single NEXUS token, and embedded comments, along with end-of-the-token...">ProcessedNxsToken</a> and <a class="el" href="classNxsToken.html">NxsToken</a> can be tricky to use if detailed position location of the comment is required. A vector of "embedded comments" in the NCL context is a collection of all comments that were encountered during a GetNextToken operation. The behavior depends on whether the tokenizer can tell if a section of text is has the potential to span comment. Potentially comment-spanning tokens have to be read until a token-breaker is found. Thus they include trailing comments. Thus it is not always easy (or possible) for client code to determine whether a specifie comment belongs "with" a particular NEXUS token rather than the previous or next token. For example: Text Result as (token, {"embedded comment"}) pairs Explanation ============================ ============================================= ===================================== ;a[1]b; (;, {}), (ab, {1}), (;, {}) ab is a comment-spanning token ;[1]a[2]b; (;, {}), (ab, {1, 2}), (;, {}) tokenizer realizes that ; is always a single token so [1] is not encountered until the second GetNextToken() call. a[1];[2]b; (a, {1}), (;, {}) (b, {2}), (;, {}) First GetNextToken() call reads "a" token until ; (thus reading "[1]") ; is a single character token, so no comments are read, thus making [2] part of the third GetNextToken call().</p>
<p>In some cases the comment position information and token position information may reveal the exact location of the comments. Fortunately the relative order of comments is retained and the exact position is rarely needed.\</p>
<p>Note 2: Using the <a class="el" href="classNxsToken.html">NxsToken</a> class with the saveCommandComments LabileFlag causes [&amp;comment text here] comments to be returned as tokens ONLY if they are not preceded by potentially comment-spanning tokens. This "feature" is new to NCL v2.1 and is the result of a bug-fix (previous versions of NCL incorrectly broke tokens at the start of any comment).</p>
<p>Text Result as in saveCommandComments mode Explanation ========================= ============================================= ===================================== =[&amp;R](1, ("=",{}) ("&amp;R", {}), ("(",{}), ("1",{}), (",",{}) [&amp;R] is not in the middle of potentially-comment-spanning token. a[&amp;R]b, ("ab",{"&amp;R"}), (",",{}) [&amp;R] is in the middle of comment-spanning token "ab" a[&amp;R], ("a",{"&amp;R"}), (",",{}) [&amp;R] is in on the trailing end of a potentially-comment-spanning token "a" the tokenizer This wart makes it more tedious to deal with command comments. However it is tolerable becuase the only supported use of command comments in NCL is after single-character tokens (for example after = in a tree descpription).</p>
<p>The NHX command comments are not processed by NCL, but they occur in contexts in which it will be possible to determine the correct location of the comment (though it is necessary to check the embedded comments when processing NHX trees):</p>
<p>Text Result as NOT IN saveCommandComments mode Explanation ========================= =================================================== ===================================== ):3.5[&amp;&amp;NHXtext], (")",{}) (":", {}), ("3.5",{"&amp;&amp;NHXtext"}), (",",{}) "3.5" is potentially-comment-spanning, but the comment still is stored with other metadata for the same edge. )[&amp;&amp;NHXtext], (")",{}) (",", {"&amp;&amp;NHXtext"}) NHX comment is parsed with the second token, but because , is NOT potentially-comment-spanning know that [&amp;&amp;NHXtext] must have preceded the comma (the token and comment column numbers would also make this clear.</p>
<p>New in 2.1</p>
<ul>
<li>See Note 2 above (bug-fix, but wart introduced). This could lead to loss of backward compatibility if client code relies of saveCommandComments in contexts in which command comments occur within potentially comment-spanning tokens.</li>
<li><a class="el" href="classNxsComment.html" title="General notes on NexusTokenizing.">NxsComment</a> class.</li>
</ul>
<p>Comments are stored in tokenization (the GetNextToken() call will trash the previous comments, so client code must store comments if they are needed permanently).</p>
<ul>
<li>NxsToken::SetEOFAllowed method added and SetEOFAllowed(false) is called when entering a block. This means that when parsing block contents the <a class="el" href="classNxsToken.html">NxsToken</a> tokenizer will raise an <a class="el" href="classNxsException.html" title="Exception class that conveys a message specific to the problem encountered.">NxsException</a> if it runs out of file (thus Block reader code no longer needs to check for atEOF() constantly to issue an appropriate error).</li>
<li><a class="el" href="classProcessedNxsToken.html" title="Storage for a single NEXUS token, and embedded comments, along with end-of-the-token...">ProcessedNxsToken</a> class, <a class="el" href="classNxsToken.html">NxsToken</a>:ProcessAsSimpleKeyValuePairs, and <a class="el" href="classNxsToken.html">NxsToken</a>:ProcessAsCommand methods. This makes it easier to parse commands (by allowing random access to the tokens in a command). These methods are not appropriate for very long commands (such as MATRIX) or commands that require fiddling with the tokenizing rules (such as disabling the hyphen as a token breaker)</li>
<li>lazy <a class="el" href="classNxsToken_a17e5caf91acc756c23159f76f8b2d0fd.html#a17e5caf91acc756c23159f76f8b2d0fd" title="Returns value stored in filepos, which keeps track of the current position in the...">NxsToken::GetFilePosition()</a> and low level io operations dramatically speed up tokenization (~10-20 times faster).</li>
<li>some other utility functions were added, and some refactoring (delegation to <a class="el" href="classNxsString.html" title="A string class for use with the Nexus Class Library.">NxsString</a>) was done to clean up</li>
</ul>
<p>Storage for a comment text and (end of the comment) file position information </p>

<p>Definition at line <a class="el" href="nxstoken_8h_source.html#l00110">110</a> of file <a class="el" href="nxstoken_8h_source.html">nxstoken.h</a>.</p>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="nxstoken_8h_source.html">nxstoken.h</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Sat Mar 27 13:49:20 2010 for NCL by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
