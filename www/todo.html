<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>untitled</title>
	<meta name="author" content="Peter Cowan">
	<link rel="stylesheet" href="style.css" type="text/css" />
	<!-- Date: 2008-01-25 -->
</head>
<body>
<div class="content">

<h1 id="for_version_03">FOR VERSION 0.3</h1>

<ul>
<li>Check in general for completeness (i.e. replacement functions), obvious bugs</li>
<li>Plotting: see below</li>
<li>Data classes: see below</li>
<li>multiPhylo: see below</li>
<li>Documentation: see below</li>
<li>data class: check and incorporate into phylo4d FIXME: what do we mean here?</li>
<li>incorporate ioNCL</li>
</ul>

<h2 id="plotting">Plotting</h2>

<h3 id="phylo4d_objects">phylo4d objects</h3>

<ul>
<li>verify that identify works with this version</li>
<li>error in plotting a subsetted tree: see tests/plottest.R</li>
<li>modify phylo4 method to allow &#8220;Singles&#8221; (plot.phylo doesn&#8217;t)?</li>
<li>plotting with data and <code>show.node.label</code> scrambles order of node labels <em>this is really a problem with ade4 vs ape ordering of nodes</em></li>
<li>plotting with subsetted data can throw error (see tests/plottest.R)</li>
<li>multiPhylo4x plotting</li>
</ul>

<h2 id="data_classes">Data classes</h2>

<h3 id="tree_model">Tree model:</h3>

<ul>
<li>assigning edge and node labels &#8212; is there/should there be an option to turn this off?  assign empty (&#8220;&#8221;) labels?</li>
<li>should default node labels start at N(nTips+1), to match internal node numbers?</li>
<li>should coercing phylo4d to phylo4 give a warning message about losing data?   Should phylo4d to phylo4?</li>
<li>order: All phylo4 edge matrices are internally stored as &#8220;cladewise&#8221;/Newick traversal order.  Extend edges accessor method with optional argument that allows edges to be extracted in a different order (possibly with an attribute as in ape); need to steal &#8216;reorder&#8217; from ape, extend for phylo4d keeping track of traits also see ape::ladderize</li>
<li>root node data characteristics (compare what OUCH does): root node doesn&#8217;t have corresponding entry in the edge matrix:  ouch adds a row to the edge matrix (1-row data frame matching node column info). Not entirely clear how we should deal with this, MB has a proposal.</li>
<li>Data model: There seems to be consensus that the data model should be at least a little bit richer than a straight data frame, that we should create a new data class.  There&#8217;s a draft standard in pdata.R in the current package. <br />
<ul>
<li>&#8220;Basic&#8221; metadata (slot &#8216;type&#8217; in the data class) is implemented as a factor with allowed levels (&#8220;multitype&#8221;, &#8220;binary&#8221;, &#8220;continuous&#8221;, &#8220;DNA&#8221;, &#8220;RNA&#8221;, &#8220;aacid&#8221;, &#8220;other&#8221;, &#8220;unknown&#8221;). There&#8217;s an argument for sticking with the NEXUS types exactly, and one for extending them.  </li>
<li>&#8220;Extended&#8221; metadata (slot &#8216;metadata&#8217; in the data class) is implemented as an arbitrary list.  </li>
<li>There are two camps over how molecular data should be incorporated.  1) Do we want two slots &#8212; one for molecular and one for non-molecular &#8212; or 2) do we want to stick the molecular data (especially long alignments) in a data frame as (e.g.) a character? <br />
<ol>
<li>Doing it the first way makes it hard to do subsetting operations transparently.  </li>
<li>Doing it the second way makes handling genetic data harder (and wastes space etc.). It is possible to have a &#8220;raw&#8221; vector within a data frame (which is the base type for &#8220;DNAbin&#8221; objects in ape), but we can&#8217;t have a DNAbin object itself.  We could either convert to/from DNAbin as we accessed slots from the data frame (ugh), or we could try to write the rich data frame.  </li>
<li><strong>If we design the accessor functions really well, and people use them rather than digging into the guts, we can change things later.</strong>  Do the people at the <a href="http://rgenetics.org/">R Genetics project</a> have any ideas about this?  </li>
</ol></li>
<li>do we want to allow an accessor method to do the equivalent of <code>tdata(object)[i,j] &lt;- value</code> ? or should people mess with their data before they attach it to the tree? (is this harder once the data are packed inside an additional layer of structure?)</li>
</ul></li>
</ul>

<h3 id="multiphylo">multiPhylo</h3>

<ul>
<li>extend classes: should we have both multiPhylo4 (no data) and multiPhylo4d (with data) [DONE]</li>
<li>Implement multiphylo tree names? [DONE]</li>
<li>need multiPhylo! &#8220;unpack&#8221;/&#8221;pack&#8221; methods (convert multiPhylo4x to list of phylo4x, convert list of phylo4x to multiPhylo4x)</li>
<li><code>ctree()</code> method</li>
<li>Still need many basic methods</li>
<li><code>show()</code>, <code>summary()</code>, <code>plot()</code> methods can mimic <code>ape</code>&#8217;s new <code>multiphylo</code> class, though multiPhylo4d will need to match what we do for phylo4d</li>
</ul>

<h3 id="documentation">Documentation</h3>

<ul>
<li>Complete full example in vignette</li>
<li>Does S4-style help access really work? FIXME: Be more specific</li>
<li>is the phylo4 constructor actually documented anywhere?</li>
<li>phylo4 constructor should have its own method manpage (currently is inside the class doc)  FIXED (we think)</li>
</ul>

<h1 id="for_version_04">FOR VERSION 0.4</h1>

<h3 id="options">Options</h3>

<ul>
<li>phylo.compat: default=TRUE, allows accessing internal phylo4 elements with $ and $&lt;- FIXME: Is this different than the current implementation? </li>
<li>check.data defaults FIXME: what does this mean?</li>
<li>cf implementations in other packages (e.g. bbmle) FIXME: what does &#8220;cf&#8221; and &#8220;bbmle&#8221; mean?</li>
</ul>

<h3 id="rooting">Rooting</h3>

<ul>
<li>implement re-rooting</li>
<li>check with Sidlauskas: is there an &#8220;infelicity&#8221; in the way ape does it that we should modify? FIXME: what feature/aspect are we talking about here?</li>
</ul>

<h3 id="tree_walking_generic_manipulation_methods">Tree walking/generic manipulation methods</h3>

<ul>
<li>Decide on a coherent numbers/names policy</li>
<li>General practice: how much should we work with/return internal node numbers, and how much node names/tags?  Current methods are a mishmash</li>
<li>Can all of these can be done with phylobase:
<ul>
<li>compare: with Mesquite, ape (check O&#8217;Meara list), and Sidlauskas <a href="https://www.nescent.org/wg_phyloinformatics/R_Hackathon/DataTreeManipulation">wiki page</a></li>
<li>geiger: prune.extinct.taxa, prune.random.taxa</li>
<li>allDescend to give internal nodes as well as tips?</li>
<li>Movement along branches, traversal, etc.: what operations are needed?</li>
<li>allDescend gets tips only &#8212; option to get list including internal nodes?</li>
<li>time slices: prune back by time ?</li>
</ul></li>
</ul>

<h3 id="documentation">Documentation</h3>

<ul>
<li>work through Sidlauskas wiki page</li>
</ul>

<h1 id="future_discussions">FUTURE DISCUSSIONS</h1>

<h2 id="terminology">Terminology</h2>

<h3 id="some_things_to_think_about_renaming">Some things to think about (re)naming:</h3>

<ul>
<li>tree walking: <code>getDescend</code>, <code>getAncest</code>, <code>allDescend</code>, <code>allAncest</code> &#8212; sons and fathers, daughters and mothers, tips/leaves, ?</li>
<li>should <code>check_data</code> be <code>check_phylo4d</code> for consistency with <code>check_phylo4</code> (or should <code>check_phylo4</code> be <code>check_tree</code>?)</li>
<li>EdgeLength/BranchLength?</li>
<li>root, Root, rootNode, RootNode?</li>
<li><code>subset(phy,node.subtree= )</code> == <code>subset(phy,subtree= )</code> ?</li>
</ul>

<h2 id="plotting">Plotting</h2>

<ul>
<li>other ways of plotting tree+data?  isoMDS + color space?</li>
<li>ggplot2 extension?  grid version?</li>
<li>look for nice examples of ways people have plotted trees+data</li>
</ul>

<h2 id="multiphylo">multiPhylo</h2>

<ul>
<li>Eventually may want to use something like the <a href="http://wiki.r-project.org/rwiki/doku.php?id=packages:cran:trackobjs">trackObjs package</a> if we have lots and lots of trees</li>
<li>Do we want to write some kind of <code>apply()</code> function for these? Or, alternatively, just provide documentation for how you would use [ls]apply on a multiPhylo object e.g., <code>sapply(object@phylolist,fn,data=tdata(object),...)</code></li>
</ul>

<h2 id="data_checking">Data checking</h2>

<ul>
<li>should <code>check_phylo4</code> check for cyclicity, or is this overkill?</li>
<li>what other checks should there be on a phylo4 tree?  right now we check for (1) right number of edge lengths (if >0), (2) right number of tip labels, (3) at most one root, (4) only one ancestor per node.</li>
<li>information returned by <code>check_data</code> isn&#8217;t quite the same format as geiger&#8217;s matching function. Clear enough?</li>
<li>should there be an option for pruning tree to data? does this already exist?</li>
<li>option for fuzzy matching with <code>agrep()</code>?
<ul>
<li>(&#8220;fuzzywarn&#8221; for fuzzy matching with warning,</li>
</ul></li>
<li>extend label-matching code to node labels</li>
</ul>

<h2 id="discuss">Discuss</h2>

<ul>
<li>Rewrite methods in native phylo4 as necessary/desirable [????]
<ul>
<li>Code from ape often calls some C code&#8230; so I would leave what calls ape as much as possible (T.J.)</li>
</ul></li>
<li>Figure out best way to deal with namespace/conflicts (overriding ape methods)
<ul>
<li>synch with newest ape release:
<ul>
<li>is <code>multi.tree</code> now <code>multiPhylo</code>?</li>
</ul></li>
</ul></li>
<li>implement NAMESPACE??</li>
<li>TreeLib wrapper?</li>
<li>more tree manipulation methods</li>
<li>lapply/multiple-tree methods, or at least documentation on how to do it</li>
<li>compare Sidlauskas wiki documentation, how would one do it in phylo4?</li>
<li>synch with <code>ape</code> on name conflicts, multi.tree/multiPhylo</li>
<li>implement NAMESPACE?</li>
</ul>

<h2 id="testing">Testing</h2>

<ul>
<li>end users need to start reading documentation, testing &#8230;</li>
</ul>
<p id="footer">Marked up by Peter Cowan on 23 December 2007</p>
</div>
</body>
</html>
